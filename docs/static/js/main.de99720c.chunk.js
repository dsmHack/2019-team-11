(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(t,e,n){t.exports=n(295)},112:function(t,e,n){},129:function(t,e,n){},130:function(t,e,n){},187:function(t,e,n){},295:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),s=n(17),i=n.n(s),o=(n(112),n(5)),c=n.n(o),u=n(15),l=n(20),p=n(31),h=n(34),d=n(32),f=n(21),m=n(33),v=n(35),y=(n(129),function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(h.a)(this,Object(d.a)(e).call(this))).state={dataPointsToPlot:t.dataPointsToPlot,coordinatesList:[]},n}return Object(m.a)(e,t),Object(p.a)(e,[{key:"setCoordinatesList",value:function(t){this.setState({coordinatesList:t})}},{key:"createMarkers",value:function(){var t=this;void 0!=this.state.dataPointsToPlot&&this.state.dataPointsToPlot.forEach(function(e){return t.createMarker(e)})}},{key:"createMarker",value:function(t){return r.a.createElement(v.Marker,{position:{lat:t.lat,lng:t.lng},icon:{url:"/images/low.png",anchor:new window.google.maps.Point(24,24),scaledSize:new window.google.maps.Size(48,48)}})}},{key:"render",value:function(){return r.a.createElement(v.Map,{google:this.props.google,zoom:17,initialCenter:{lat:41.583586,lng:-93.628419}},r.a.createElement(v.Polygon,{paths:this.state.coordinatesList,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35}),this.createMarkers())}}]),e}(a.Component)),g=n(99),b=n.n(g),w=(n(130),function(t){var e=t.title;return r.a.createElement("div",{className:"header"},r.a.createElement(b.a,{position:"static"},r.a.createElement("label",null,e)))}),k=n(61),x=n.n(k),O=n(101),j=n.n(O),D=n(105),P=n.n(D),S=n(103),E=n.n(S),L=n(102),C=n.n(L),N=n(104),M=n.n(N),T=(n(187),function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(h.a)(this,Object(d.a)(e).call(this,t))).state={address:""},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleKeyPress=n.handleKeyPress.bind(Object(f.a)(n)),n.handleOnClick=n.handleOnClick.bind(Object(f.a)(n)),n}return Object(m.a)(e,t),Object(p.a)(e,[{key:"handleChange",value:function(t){var e=t.target;this.setState({address:e.value})}},{key:"handleOnClick",value:function(){var t=Object(u.a)(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.handleSubmit(this.state.address);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"handleKeyPress",value:function(){var t=Object(u.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==e.key){t.next=3;break}return t.next=3,this.props.handleSubmit(this.state.address);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(j.a,{className:"modal"},r.a.createElement(C.a,{className:"title",title:"TYPE YOUR ADDRESS"}),r.a.createElement(E.a,null,r.a.createElement(M.a,{className:"address",type:"text",value:this.state.address,placeholder:"Enter Address Here...",onChange:this.handleChange,onKeyPress:this.handleKeyPress})),r.a.createElement(P.a,null,r.a.createElement(x.a,{className:"nextButton",size:"medium",variant:"contained",color:"primary",onClick:this.handleOnClick},"NEXT"),";"))}}]),e}(a.Component)),I="drinking",F=n(19),R=n.n(F);function A(){return(A=Object(u.a)(c.a.mark(function t(e,n){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://watersgeo.epa.gov/arcgis/rest/services/NHDPlus_NP21/WBD_NP21_Simplified/MapServer/find?searchText="+e+"&contains=true&searchFields=&sr=&layers="+n+"&layerDefs=&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&dynamicLayers=&returnZ=false&returnM=false&gdbVersion=&returnUnformattedValues=false&returnFieldName=false&datumTransformations=&layerParameterValues=&mapRangeValues=&layerRangeValues=&f=pjson",t.abrupt("return",R.a.get(a).then(function(t){return t}).catch(function(t){return console.log(t),"will the water kill me?"}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}var B=function(t,e){return A.apply(this,arguments)},W="https://programs.iowadnr.gov/bionet/api/v1/sites/by_huc8/",_="https://programs.iowadnr.gov/bionet/api/v1/fish/fibi/by_site/",V="https://www.waterqualitydata.us/data/Station/search?",z="https://www.waterqualitydata.us/data/Result/search?",G="She get wet",H="Address not found",K="Watershed not found",U="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates",q="https://inlandwaters.geoplatform.gov/arcgis/rest/services/NHDPlus/WatershedBoundaryDataset/MapServer/10/query";function J(){return(J=Object(u.a)(c.a.mark(function t(e){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=U,t.abrupt("return",R.a.get(n,{params:{outFields:"Loc_name,City,Place_addr,Region,RegionAbbr,Country",outSR:{latestWkid:3857,wkid:102100},f:"json",SingleLine:e}}).then(function(t){if("undefined"===typeof t.data.candidates[0])return Promise.reject(H);var e=t.data.candidates[0];return{spatialReference:t.data.spatialReference,x:e.location.x,y:e.location.y}}).then(function(t){return Q(t)}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Q(t){return Y.apply(this,arguments)}function Y(){return(Y=Object(u.a)(c.a.mark(function t(e){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=q,t.abrupt("return",R.a.get(n,{params:{f:"json",outFields:"HUC12",spatialRel:"esriSpatialRelIntersects",where:"1=1",geometryType:"esriGeometryPoint",inSR:"102100",outSR:"102100",geometry:e}}).then(function(t){return"undefined"===typeof t.data.features[0]?Promise.reject(K):t.data.features[0].attributes.HUC12}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}var Z=function(t){return J.apply(this,arguments)},X=function t(){Object(l.a)(this,t),this.name="",this.unit="",this.value=0,this.date="",this.locId=""},$=function t(){Object(l.a)(this,t),this.locId="",this.name="",this.lat=0,this.long=0,this.datas=[]};function tt(){return(tt=Object(u.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",nt(e,"Escherichia%20coli"));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function et(){return(et=Object(u.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",nt(e,"Nitrate"));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function nt(t,e){return at.apply(this,arguments)}function at(){return(at=Object(u.a)(c.a.mark(function t(e,n){var a,r,s,i,o,u,l,p,h,d,f;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht(e,n);case 2:return a=t.sent,console.log(a),r=rt(a.data),t.next=7,lt(e,n);case 7:for(s=t.sent,i=it(s.data),o=!0,u=!1,l=void 0,t.prev=12,p=i.keys()[Symbol.iterator]();!(o=(h=p.next()).done);o=!0)d=h.value,void 0!==(f=r.get(d))&&i.get(d).datas.push(f);t.next=20;break;case 16:t.prev=16,t.t0=t.catch(12),u=!0,l=t.t0;case 20:t.prev=20,t.prev=21,o||null==p.return||p.return();case 23:if(t.prev=23,!u){t.next=26;break}throw l;case 26:return t.finish(23);case 27:return t.finish(20);case 28:return t.abrupt("return",i);case 29:case"end":return t.stop()}},t,null,[[12,16,20,28],[21,,23,27]])}))).apply(this,arguments)}function rt(t){var e=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("Activity"),n=new Map,a=!0,r=!1,s=void 0;try{for(var i,o=function(){var t=i.value,e=new X,a=function(e){var n=t.getElementsByTagName(e)[0];return void 0===n?null:n.childNodes[0].nodeValue};e.name=a("CharacteristicName"),e.locId=a("MonitoringLocationIdentifier"),e.date=a("ActivityStartDate"),e.value=a("ResultMeasureValue"),e.unit=a("MeasureUnitCode");var r=n[e.locId];(null==r||Date.parse(e.date)>Date.parse(r.date))&&n.set(e.locId,e)},c=e[Symbol.iterator]();!(a=(i=c.next()).done);a=!0)o()}catch(u){r=!0,s=u}finally{try{a||null==c.return||c.return()}finally{if(r)throw s}}return n}function st(){return(st=Object(u.a)(c.a.mark(function t(e){var n,a,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.data,a="",null!=n&&null!=n.results&&n.results.length>0&&null!=n.results[0].geometryType&&"esriGeometryPolygon"===n.results[0].geometryType&&n.results[0].geometry.rings[0].forEach(function(t){a+=t[0]+","+t[1]+";"}),a=a.substring(0,a.length-1),r="http://epsg.io/trans?data=".concat(a,"&s_srs=3857&t_srs=4326"),t.next=7,R.a.get(r).catch(function(t){console.log(t)});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function it(t){var e=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("MonitoringLocation"),n=new Map,a=!0,r=!1,s=void 0;try{for(var i,o=function(){var t=i.value,e=new $,a=function(e){var n=t.getElementsByTagName(e)[0];return void 0===n?null:n.childNodes[0].nodeValue};e.locId=a("MonitoringLocationIdentifier"),e.name=a("MonitoringLocationName"),e.lat=a("LatitudeMeasure"),e.long=a("LongitudeMeasure");var r=n[e.locId];(null==r||Date.parse(e.date)>Date.parse(r.date))&&n.set(e.locId,e)},c=e[Symbol.iterator]();!(a=(i=c.next()).done);a=!0)o()}catch(u){r=!0,s=u}finally{try{a||null==c.return||c.return()}finally{if(r)throw s}}return n}function ot(){return(ot=Object(u.a)(c.a.mark(function t(e){var n,a,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=12===e.length,a=e.substring(0,8),r=W,t.abrupt("return",R.a.get(r+a).then(function(t){return t.data}).then(function(t){if(n){var a=t.filter(function(t){return t.huc12===e});return Promise.resolve(a)}return Promise.resolve(t)}).then(function(t){return t.map(function(t){return t.id})}).then(function(t){return Promise.all(t.map(ct))}).catch(function(t){return console.log(t),G}));case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function ct(t){return ut.apply(this,arguments)}function ut(){return(ut=Object(u.a)(c.a.mark(function t(e){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=_,t.abrupt("return",R.a.get(n+e).then(function(t){return t.data}).then(function(t){return t.sort(function(t,e){return new Date(e.sampleDate)-new Date(t.sampleDate)})}).then(function(t){return t[0]}).then(function(t){var e=new $;e.name=t.site.name+" - "+t.site.landmark,e.lat=t.site.LatDD,e.long=t.site.LongDD;var n=new X;return n.name="FIBI",n.unit="rating",n.value=t.FIBI,n.type=t.FIBIType,n.class=t.FIBIClass,n.date=t.sampleDate,e.datas.push(n),e}).catch(function(t){console.log(t)}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function lt(t,e){return pt.apply(this,arguments)}function pt(){return(pt=Object(u.a)(c.a.mark(function t(e,n){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=V+"startDateLo=".concat(ft(),"&huc=").concat(e,"&mimeType=xml&characteristicName=").concat(n),t.abrupt("return",R.a.get(a).then(function(t){return t}).catch(function(t){return G}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function ht(t,e){return dt.apply(this,arguments)}function dt(){return(dt=Object(u.a)(c.a.mark(function t(e,n){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=z+"startDateLo=".concat(ft(),"&huc=").concat(e,"&mimeType=xml&characteristicName=").concat(n),t.abrupt("return",R.a.get(a).then().catch(function(t){console.log(t)}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function ft(){var t=new Date;return t.setMonth(t.getMonth()-2),t.toLocaleDateString().replace(/\//g,"-")}function mt(){return(mt=Object(u.a)(c.a.mark(function t(e,n){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}))).apply(this,arguments)}var vt={getEcoliData:function(t){return tt.apply(this,arguments)},getNitrateData:function(t){return et.apply(this,arguments)},getFibiData:function(t){return ot.apply(this,arguments)},getEpaStations:lt,getSampleResults:ht,getHuc:function(t,e){return mt.apply(this,arguments)},convertEsriGeometryPolygonToLatLngList:function(t){return st.apply(this,arguments)}},yt=n(43),gt=n(106),bt=n.n(gt),wt=(n(291),Object(yt.createMuiTheme)({palette:{primary:bt.a,secondary:{main:"#84ffff"}},typography:{useNextVariants:!0}})),kt=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(h.a)(this,Object(d.a)(e).call(this))).state={coordinatesList:[],dataPointsToPlot:[],ecoliData:[],nitrateData:[],fibiData:[],selectedLayer:I},t.handleSubmit=t.handleSubmit.bind(Object(f.a)(t)),t.setCoordinatesList=t.setCoordinatesList.bind(Object(f.a)(t)),t}return Object(m.a)(e,t),Object(p.a)(e,[{key:"handleSubmit",value:function(){var t=Object(u.a)(c.a.mark(function t(e){var n,a,r,s,i,o,u,l,p,h,d;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(e);case 2:return n=t.sent,console.log("hucId: "+n),t.next=6,B(n,"huc_12");case 6:return a=t.sent,console.log(a),t.next=10,vt.convertEsriGeometryPolygonToLatLngList(a);case 10:for(r=t.sent.data,s=[],i=!0,o=!1,u=void 0,t.prev=15,l=r[Symbol.iterator]();!(i=(p=l.next()).done);i=!0)h=p.value,(d={}).lat=Number(h.y),d.lng=Number(h.x),s.push(d);t.next=23;break;case 19:t.prev=19,t.t0=t.catch(15),o=!0,u=t.t0;case 23:t.prev=23,t.prev=24,i||null==l.return||l.return();case 26:if(t.prev=26,!o){t.next=29;break}throw u;case 29:return t.finish(26);case 30:return t.finish(23);case 31:return t.next=33,this.setDataPoints(n);case 33:return t.abrupt("return",this.setCoordinatesList(s));case 34:case"end":return t.stop()}},t,this,[[15,19,23,31],[24,,26,30]])}));return function(e){return t.apply(this,arguments)}}()},{key:"setCoordinatesList",value:function(t){this.setState({coordinatesList:t})}},{key:"setDataPoints",value:function(){var t=Object(u.a)(c.a.mark(function t(e){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vt.getNitrateData(e);case 2:return n=t.sent,t.t0=this,t.next=6,vt.getEcoliData(e);case 6:return t.t1=t.sent,t.t2=n,t.next=10,vt.getFibiData(e);case 10:t.t3=t.sent,t.t4={ecoliData:t.t1,nitrateData:t.t2,fibiData:t.t3},t.t0.setState.call(t.t0,t.t4),this.defaultDataPointsToPlot(n);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"defaultDataPointsToPlot",value:function(t){this.setState({dataPointsToPlot:t})}},{key:"render",value:function(){var t=this;return r.a.createElement(yt.MuiThemeProvider,{theme:wt},r.a.createElement("div",{className:"App"},r.a.createElement(w,{title:"Find Water Quality Data Near Me"}),r.a.createElement(y,this.props),r.a.createElement(T,{handleClose:function(){},show:!0,setCoordinatesList:function(e){t.setCoordinatesList(e)},handleSubmit:this.handleSubmit,setAddress:this.setAddress})))}}]),e}(a.Component),xt=Object(v.GoogleApiWrapper)({apiKey:"AIzaSyBbQM-FxetsrzMqbJ2xzZbcbDUb9Au4nh4"})(kt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(294);i.a.render(r.a.createElement(xt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[107,1,2]]]);
//# sourceMappingURL=main.de99720c.chunk.js.map