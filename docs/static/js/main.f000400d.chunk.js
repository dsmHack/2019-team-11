(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,a){e.exports=a(319)},125:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},200:function(e,t,a){},319:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),s=a.n(o),i=(a(125),a(7)),c=a.n(i),u=a(16),l=a(21),p=a(25),h=a(28),d=a(26),f=a(29),m=a(37),g=(a(142),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this))).state={dataPointsToPlot:e.dataPointsToPlot,coordinatesList:e.coordinatesList},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"createMarkers",value:function(){var e=this;void 0!=this.state.dataPointsToPlot&&this.state.dataPointsToPlot.forEach(function(t){return e.createMarker(t)})}},{key:"createMarker",value:function(e){return r.a.createElement(m.Marker,{position:{lat:e.lat,lng:e.lng},icon:{url:"/images/low.png",anchor:new window.google.maps.Point(24,24),scaledSize:new window.google.maps.Size(48,48)}})}},{key:"render",value:function(){return console.log("map render",this.props.coordinatesList),r.a.createElement(m.Map,{google:this.props.google,zoom:17,initialCenter:{lat:41.583586,lng:-93.628419}},r.a.createElement(m.Polygon,{paths:this.props.coordinatesList,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35}),this.createMarkers())}}]),t}(n.Component)),v=a(113),y=a.n(v),b=(a(143),function(e){var t=e.title;return r.a.createElement("div",{className:"header"},r.a.createElement(y.a,{position:"static"},r.a.createElement("label",null,t)))}),w=a(40),x=a(73),k=a.n(x),E=a(68),O=a.n(E),j=a(72),P=a.n(j),D=a(69),S=a.n(D),L=a(115),N=a.n(L),C=a(116),M=a.n(C),T=(a(200),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={address:""},a.handleChange=a.handleChange.bind(Object(w.a)(a)),a.handleKeyPress=a.handleKeyPress.bind(Object(w.a)(a)),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){var t=e.target;this.setState({address:t.value})}},{key:"handleKeyPress",value:function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,this.props.handleSubmit(this.state.address);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(O.a,{className:"modal"},r.a.createElement(N.a,{className:"title",title:"TYPE YOUR ADDRESS"}),r.a.createElement(S.a,null,r.a.createElement(M.a,{className:"address",type:"text",value:this.state.address,placeholder:"Enter Address Here...",onChange:this.handleChange,onKeyPress:this.handleKeyPress})),r.a.createElement(P.a,null,r.a.createElement(k.a,{className:"nextButton",size:"medium",variant:"contained",color:"primary",onClick:function(){return e.props.handleSubmit(e.state.address)}},"NEXT"),";"))}}]),t}(n.Component)),I="drinking",F=a(36),A=a(47),R=a.n(A),B=a(117),_=a.n(B),W=a(46),V=a.n(W),z=a(71),G=a.n(z),H=a(70),K=a.n(H),U=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.setState({value:e.target.value})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(G.a,{component:"fieldset",className:e.formControl},r.a.createElement(K.a,{component:"legend"},"Select activity of interest:"),r.a.createElement(_.a,{"aria-label":"Activity",name:"activity_type",className:e.group,value:this.props.value,onChange:this.handleChange},r.a.createElement(V.a,{value:"fish",control:r.a.createElement(R.a,null),label:"Fishing"}),r.a.createElement(V.a,{value:"swim",control:r.a.createElement(R.a,null),label:"Swimming"}),r.a.createElement(V.a,{value:"drink",control:r.a.createElement(R.a,null),label:"Drinking"}))))}}]),t}(r.a.Component),q=Object(F.withStyles)(function(e){return{root:{display:"flex"},formControl:{margin:3*e.spacing.unit},group:{margin:"".concat(e.spacing.unit,"px 0")},position:"absolute",top:0,left:0}})(U),J=a(22),Q=a.n(J);function Y(){return(Y=Object(u.a)(c.a.mark(function e(t,a){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://watersgeo.epa.gov/arcgis/rest/services/NHDPlus_NP21/WBD_NP21_Simplified/MapServer/find?searchText="+t+"&contains=true&searchFields=&sr=&layers="+a+"&layerDefs=&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&dynamicLayers=&returnZ=false&returnM=false&gdbVersion=&returnUnformattedValues=false&returnFieldName=false&datumTransformations=&layerParameterValues=&mapRangeValues=&layerRangeValues=&f=pjson",e.abrupt("return",Q.a.get(n).then(function(e){return e}).catch(function(e){return console.log(e),"will the water kill me?"}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Z=function(e,t){return Y.apply(this,arguments)},X="https://programs.iowadnr.gov/bionet/api/v1/sites/by_huc8/",$="https://programs.iowadnr.gov/bionet/api/v1/fish/fibi/by_site/",ee="https://www.waterqualitydata.us/data/Station/search?",te="https://www.waterqualitydata.us/data/Result/search?",ae="She get wet",ne="Address not found",re="Watershed not found",oe="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates",se="https://inlandwaters.geoplatform.gov/arcgis/rest/services/NHDPlus/WatershedBoundaryDataset/MapServer/10/query";function ie(){return(ie=Object(u.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=oe,e.abrupt("return",Q.a.get(a,{params:{outFields:"Loc_name,City,Place_addr,Region,RegionAbbr,Country",outSR:{latestWkid:3857,wkid:102100},f:"json",SingleLine:t}}).then(function(e){if("undefined"===typeof e.data.candidates[0])return Promise.reject(ne);var t=e.data.candidates[0];return{spatialReference:e.data.spatialReference,x:t.location.x,y:t.location.y}}).then(function(e){return ce(e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ce(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(u.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=se,e.abrupt("return",Q.a.get(a,{params:{f:"json",outFields:"HUC12",spatialRel:"esriSpatialRelIntersects",where:"1=1",geometryType:"esriGeometryPoint",inSR:"102100",outSR:"102100",geometry:t}}).then(function(e){return"undefined"===typeof e.data.features[0]?Promise.reject(re):e.data.features[0].attributes.HUC12}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var le=function(e){return ie.apply(this,arguments)},pe=function e(){Object(l.a)(this,e),this.name="",this.unit="",this.value=0,this.date="",this.locId=""},he=function e(){Object(l.a)(this,e),this.locId="",this.name="",this.lat=0,this.long=0,this.datas=[]};function de(){return(de=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",me(t,"Escherichia%20coli"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(){return(fe=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",me(t,"Nitrate"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Object(u.a)(c.a.mark(function e(t,a){var n,r,o,s,i,u,l,p,h,d,f;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,a);case 2:return n=e.sent,console.log(n),r=ve(n.data),e.next=7,Ee(t,a);case 7:for(o=e.sent,s=be(o.data),i=!0,u=!1,l=void 0,e.prev=12,p=s.keys()[Symbol.iterator]();!(i=(h=p.next()).done);i=!0)d=h.value,void 0!==(f=r.get(d))&&s.get(d).datas.push(f);e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),u=!0,l=e.t0;case 20:e.prev=20,e.prev=21,i||null==p.return||p.return();case 23:if(e.prev=23,!u){e.next=26;break}throw l;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return e.abrupt("return",s);case 29:case"end":return e.stop()}},e,null,[[12,16,20,28],[21,,23,27]])}))).apply(this,arguments)}function ve(e){var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Activity"),a=new Map,n=!0,r=!1,o=void 0;try{for(var s,i=function(){var e=s.value,t=new pe,n=function(t){var a=e.getElementsByTagName(t)[0];return void 0===a?null:a.childNodes[0].nodeValue};t.name=n("CharacteristicName"),t.locId=n("MonitoringLocationIdentifier"),t.date=n("ActivityStartDate"),t.value=n("ResultMeasureValue"),t.unit=n("MeasureUnitCode");var r=a[t.locId];(null==r||Date.parse(t.date)>Date.parse(r.date))&&a.set(t.locId,t)},c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0)i()}catch(u){r=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}function ye(){return(ye=Object(u.a)(c.a.mark(function e(t){var a,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,n="",null!=a&&null!=a.results&&a.results.length>0&&null!=a.results[0].geometryType&&"esriGeometryPolygon"===a.results[0].geometryType&&a.results[0].geometry.rings[0].forEach(function(e){n+=e[0]+","+e[1]+";"}),n=n.substring(0,n.length-1),r="http://epsg.io/trans?data=".concat(n,"&s_srs=3857&t_srs=4326"),e.next=7,Q.a.get(r).catch(function(e){console.log(e)});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(e){var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("MonitoringLocation"),a=new Map,n=!0,r=!1,o=void 0;try{for(var s,i=function(){var e=s.value,t=new he,n=function(t){var a=e.getElementsByTagName(t)[0];return void 0===a?null:a.childNodes[0].nodeValue};t.locId=n("MonitoringLocationIdentifier"),t.name=n("MonitoringLocationName"),t.lat=n("LatitudeMeasure"),t.long=n("LongitudeMeasure");var r=a[t.locId];(null==r||Date.parse(t.date)>Date.parse(r.date))&&a.set(t.locId,t)},c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0)i()}catch(u){r=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}function we(){return(we=Object(u.a)(c.a.mark(function e(t){var a,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=12===t.length,n=t.substring(0,8),r=X,e.abrupt("return",Q.a.get(r+n).then(function(e){return e.data}).then(function(e){if(a){var n=e.filter(function(e){return e.huc12===t});return Promise.resolve(n)}return Promise.resolve(e)}).then(function(e){return e.map(function(e){return e.id})}).then(function(e){return Promise.all(e.map(xe))}).catch(function(e){return console.log(e),ae}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xe(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(u.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=$,e.abrupt("return",Q.a.get(a+t).then(function(e){return e.data}).then(function(e){return e.sort(function(e,t){return new Date(t.sampleDate)-new Date(e.sampleDate)})}).then(function(e){return e[0]}).then(function(e){var t=new he;t.name=e.site.name+" - "+e.site.landmark,t.lat=e.site.LatDD,t.long=e.site.LongDD;var a=new pe;return a.name="FIBI",a.unit="rating",a.value=e.FIBI,a.type=e.FIBIType,a.class=e.FIBIClass,a.date=e.sampleDate,t.datas.push(a),t}).catch(function(e){console.log(e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ee(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(u.a)(c.a.mark(function e(t,a){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee+"startDateLo=".concat(De(),"&huc=").concat(t,"&mimeType=xml&characteristicName=").concat(a),e.abrupt("return",Q.a.get(n).then(function(e){return e}).catch(function(e){return ae}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function je(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(u.a)(c.a.mark(function e(t,a){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=te+"startDateLo=".concat(De(),"&huc=").concat(t,"&mimeType=xml&characteristicName=").concat(a),e.abrupt("return",Q.a.get(n).then().catch(function(e){console.log(e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function De(){var e=new Date;return e.setMonth(e.getMonth()-2),e.toLocaleDateString().replace(/\//g,"-")}function Se(){return(Se=Object(u.a)(c.a.mark(function e(t,a){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Le={getEcoliData:function(e){return de.apply(this,arguments)},getNitrateData:function(e){return fe.apply(this,arguments)},getFibiData:function(e){return we.apply(this,arguments)},getEpaStations:Ee,getSampleResults:je,getHuc:function(e,t){return Se.apply(this,arguments)},convertEsriGeometryPolygonToLatLngList:function(e){return ye.apply(this,arguments)}},Ne=(a(321),a(322),a(118)),Ce=a.n(Ne),Me=(a(307),a(314),Object(F.createMuiTheme)({palette:{primary:Ce.a,secondary:{main:"#84ffff"}},typography:{useNextVariants:!0}})),Te=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).handleSubmit=function(){var t=Object(u.a)(c.a.mark(function t(a){var n,r,o,s,i,u,l,p,h,d,f,m;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,le(a);case 2:return n=t.sent,console.log("hucId: "+n),t.next=6,Z(n,"huc_12");case 6:return r=t.sent,console.log(r),t.next=10,Le.convertEsriGeometryPolygonToLatLngList(r);case 10:for(o=t.sent.data,s=[],i=!0,u=!1,l=void 0,t.prev=15,p=o[Symbol.iterator]();!(i=(h=p.next()).done);i=!0)d=h.value,(f={}).lat=Number(d.y),f.lng=Number(d.x),s.push(f);t.next=23;break;case 19:t.prev=19,t.t0=t.catch(15),u=!0,l=t.t0;case 23:t.prev=23,t.prev=24,i||null==p.return||p.return();case 26:if(t.prev=26,!u){t.next=29;break}throw l;case 29:return t.finish(26);case 30:return t.finish(23);case 31:return console.log("coords",s),e.setState({coordinatesList:s}),t.next=35,Le.getNitrateData(n);case 35:return m=t.sent,t.t1=e,t.next=39,Le.getEcoliData(n);case 39:return t.t2=t.sent,t.t3=m,t.next=43,Le.getFibiData(n);case 43:t.t4=t.sent,t.t5={ecoliData:t.t2,nitrateData:t.t3,fibiData:t.t4},t.t1.setState.call(t.t1,t.t5),e.setState({dataPointsToPlot:m});case 47:case"end":return t.stop()}},t,null,[[15,19,23,31],[24,,26,30]])}));return function(e){return t.apply(this,arguments)}}(),e.state={coordinatesList:[],dataPointsToPlot:[],ecoliData:[],nitrateData:[],fibiData:[],selectedLayer:I,activity:"drink"},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"defaultDataPointsToPlot",value:function(e){}},{key:"render",value:function(){var e=this;return console.log("render",this.state.coordinatesList),r.a.createElement(F.MuiThemeProvider,{theme:Me},r.a.createElement("div",{className:"App"},r.a.createElement(b,{title:"Find Water Quality Data Near Me"}),r.a.createElement(g,{google:this.props.google,coordinatesList:this.state.coordinatesList,dataPointsToPlot:this.state.dataPointsToPlot}),r.a.createElement(q,{handleClose:function(){},show:!0,value:this.state.activity}),r.a.createElement(T,{handleClose:function(){},show:!0,setCoordinatesList:function(t){e.setCoordinatesList(t)},handleSubmit:this.handleSubmit,setAddress:this.setAddress})))}}]),t}(n.Component),Ie=Object(m.GoogleApiWrapper)({apiKey:"AIzaSyBbQM-FxetsrzMqbJ2xzZbcbDUb9Au4nh4"})(Te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(318);s.a.render(r.a.createElement(Ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[120,1,2]]]);
//# sourceMappingURL=main.f000400d.chunk.js.map