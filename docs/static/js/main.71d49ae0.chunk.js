(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,a){e.exports=a(319)},125:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},200:function(e,t,a){},319:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(18),i=a.n(s),o=(a(125),a(7)),c=a.n(o),u=a(16),l=a(21),p=a(25),h=a(28),d=a(26),f=a(29),m=a(37),g=(a(142),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this))).markers=[],a.shouldCreateMarkers=!0,a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"createMarkers",value:function(){if(void 0!==this.props.dataPointsToPlot&&this.props.dataPointsToPlot!==[]){console.log("Running create",this.props.dataPointsToPlot);var e=!0,t=!1,a=void 0;try{for(var n,r=this.props.dataPointsToPlot[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var s=n.value;this.markers.push(this.createMarker(s))}}catch(i){t=!0,a=i}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}this.markers.length}}},{key:"createMarker",value:function(e){console.log("Point",e);var t=e[1],a="/images/low.png";return"PCCB_WQX-977082"==t.locId&&(a="/images/med.png"),r.a.createElement(m.Marker,{key:t.locId,position:{lat:t.lat,lng:t.long},icon:{url:a,anchor:new window.google.maps.Point(24,24),scaledSize:new window.google.maps.Size(48,48)}})}},{key:"renderMarkers",value:function(){if(this.shouldCreateMarkers&&this.createMarkers(),this.markers.length>0)return console.log("render Markers: ",this.markers),this.markers}},{key:"render",value:function(){return r.a.createElement(m.Map,{google:this.props.google,zoom:13,initialCenter:{lat:41.583586,lng:-93.628419}},r.a.createElement(m.Polygon,{paths:this.props.coordinatesList,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35}),this.renderMarkers())}}]),t}(n.Component)),v=a(113),y=a.n(v),b=(a(143),function(e){var t=e.title;return r.a.createElement("div",{className:"header"},r.a.createElement(y.a,{position:"static"},r.a.createElement("label",null,t)))}),w=a(40),k=a(73),x=a.n(k),O=a(68),P=a.n(O),j=a(72),E=a.n(j),D=a(69),S=a.n(D),M=a(115),C=a.n(M),N=a(116),L=a.n(N),T=(a(200),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={address:""},a.handleChange=a.handleChange.bind(Object(w.a)(a)),a.handleKeyPress=a.handleKeyPress.bind(Object(w.a)(a)),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){var t=e.target;this.setState({address:t.value})}},{key:"handleKeyPress",value:function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,this.props.handleSubmit(this.state.address);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{className:"modal"},r.a.createElement(C.a,{className:"title",title:"TYPE YOUR ADDRESS"}),r.a.createElement(S.a,null,r.a.createElement(L.a,{className:"address",type:"text",value:this.state.address,placeholder:"Enter Address Here...",onChange:this.handleChange,onKeyPress:this.handleKeyPress})),r.a.createElement(E.a,null,r.a.createElement(x.a,{className:"nextButton",size:"medium",variant:"contained",color:"primary",onClick:function(){return e.props.handleSubmit(e.state.address)}},"NEXT"),";"))}}]),t}(n.Component)),I="drinking",F=a(36),R=a(47),A=a.n(R),B=a(117),_=a.n(B),W=a(46),V=a.n(W),z=a(71),G=a.n(z),H=a(70),K=a.n(H),U=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.setState({value:e.target.value})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(G.a,{component:"fieldset",className:e.formControl},r.a.createElement(K.a,{component:"legend"},"Select activity of interest:"),r.a.createElement(_.a,{"aria-label":"Activity",name:"activity_type",className:e.group,value:this.props.value,onChange:this.handleChange},r.a.createElement(V.a,{value:"fish",control:r.a.createElement(A.a,null),label:"Fishing"}),r.a.createElement(V.a,{value:"swim",control:r.a.createElement(A.a,null),label:"Swimming"}),r.a.createElement(V.a,{value:"drink",control:r.a.createElement(A.a,null),label:"Drinking"}))))}}]),t}(r.a.Component),q=Object(F.withStyles)(function(e){return{root:{display:"flex"},formControl:{margin:3*e.spacing.unit},group:{margin:"".concat(e.spacing.unit,"px 0")},position:"absolute",top:0,left:0}})(U),J=a(22),Q=a.n(J);function X(){return(X=Object(u.a)(c.a.mark(function e(t,a){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://watersgeo.epa.gov/arcgis/rest/services/NHDPlus_NP21/WBD_NP21_Simplified/MapServer/find?searchText="+t+"&contains=true&searchFields=&sr=&layers="+a+"&layerDefs=&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&dynamicLayers=&returnZ=false&returnM=false&gdbVersion=&returnUnformattedValues=false&returnFieldName=false&datumTransformations=&layerParameterValues=&mapRangeValues=&layerRangeValues=&f=pjson",e.abrupt("return",Q.a.get(n).then(function(e){return e}).catch(function(e){return console.log(e),"will the water kill me?"}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Y=function(e,t){return X.apply(this,arguments)},Z="https://programs.iowadnr.gov/bionet/api/v1/sites/by_huc8/",$="https://programs.iowadnr.gov/bionet/api/v1/fish/fibi/by_site/",ee="https://www.waterqualitydata.us/data/Station/search?",te="https://www.waterqualitydata.us/data/Result/search?",ae="She get wet",ne="Address not found",re="Watershed not found",se="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates",ie="https://inlandwaters.geoplatform.gov/arcgis/rest/services/NHDPlus/WatershedBoundaryDataset/MapServer/10/query";function oe(){return(oe=Object(u.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=se,e.abrupt("return",Q.a.get(a,{params:{outFields:"Loc_name,City,Place_addr,Region,RegionAbbr,Country",outSR:{latestWkid:3857,wkid:102100},f:"json",SingleLine:t}}).then(function(e){if("undefined"===typeof e.data.candidates[0])return Promise.reject(ne);var t=e.data.candidates[0];return{spatialReference:e.data.spatialReference,x:t.location.x,y:t.location.y}}).then(function(e){return ce(e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ce(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(u.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=ie,e.abrupt("return",Q.a.get(a,{params:{f:"json",outFields:"HUC12",spatialRel:"esriSpatialRelIntersects",where:"1=1",geometryType:"esriGeometryPoint",inSR:"102100",outSR:"102100",geometry:t}}).then(function(e){return"undefined"===typeof e.data.features[0]?Promise.reject(re):e.data.features[0].attributes.HUC12}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var le=function(e){return oe.apply(this,arguments)},pe=function e(){Object(l.a)(this,e),this.name="",this.unit="",this.value=0,this.date="",this.locId=""},he=function e(){Object(l.a)(this,e),this.locId="",this.name="",this.lat=0,this.long=0,this.datas=[]};function de(){return(de=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",me(t,"Escherichia%20coli"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(){return(fe=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",me(t,"Nitrate"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Object(u.a)(c.a.mark(function e(t,a){var n,r,s,i,o,u,l,p,h,d,f;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,a);case 2:return n=e.sent,r=ve(n.data),e.next=6,Oe(t,a);case 6:for(s=e.sent,i=be(s.data),o=!0,u=!1,l=void 0,e.prev=11,p=i.keys()[Symbol.iterator]();!(o=(h=p.next()).done);o=!0)d=h.value,void 0!==(f=r.get(d))&&i.get(d).datas.push(f);e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),u=!0,l=e.t0;case 19:e.prev=19,e.prev=20,o||null==p.return||p.return();case 22:if(e.prev=22,!u){e.next=25;break}throw l;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.abrupt("return",i);case 28:case"end":return e.stop()}},e,null,[[11,15,19,27],[20,,22,26]])}))).apply(this,arguments)}function ve(e){var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Activity"),a=new Map,n=!0,r=!1,s=void 0;try{for(var i,o=function(){var e=i.value,t=new pe,n=function(t){var a=e.getElementsByTagName(t)[0];return void 0===a?null:a.childNodes[0].nodeValue};t.name=n("CharacteristicName"),t.locId=n("MonitoringLocationIdentifier"),t.date=n("ActivityStartDate"),t.value=n("ResultMeasureValue"),t.unit=n("MeasureUnitCode");var r=a[t.locId];(null==r||Date.parse(t.date)>Date.parse(r.date))&&a.set(t.locId,t)},c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)o()}catch(u){r=!0,s=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw s}}return a}function ye(){return(ye=Object(u.a)(c.a.mark(function e(t){var a,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,n="",null!=a&&null!=a.results&&a.results.length>0&&null!=a.results[0].geometryType&&"esriGeometryPolygon"===a.results[0].geometryType&&a.results[0].geometry.rings[0].forEach(function(e){n+=e[0]+","+e[1]+";"}),n=n.substring(0,n.length-1),r="https://epsg.io/trans?data=".concat(n,"&s_srs=3857&t_srs=4326"),e.next=7,Q.a.get(r).catch(function(e){console.log(e)});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(e){var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("MonitoringLocation"),a=new Map,n=!0,r=!1,s=void 0;try{for(var i,o=function(){var e=i.value,t=new he,n=function(t){var a=e.getElementsByTagName(t)[0];return void 0===a?null:a.childNodes[0].nodeValue};t.locId=n("MonitoringLocationIdentifier"),t.name=n("MonitoringLocationName"),t.lat=n("LatitudeMeasure"),t.long=n("LongitudeMeasure");var r=a[t.locId];(null==r||Date.parse(t.date)>Date.parse(r.date))&&a.set(t.locId,t)},c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)o()}catch(u){r=!0,s=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw s}}return a}function we(){return(we=Object(u.a)(c.a.mark(function e(t){var a,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=12===t.length,n=t.substring(0,8),r=Z,e.abrupt("return",Q.a.get(r+n).then(function(e){return e.data}).then(function(e){if(a){var n=e.filter(function(e){return e.huc12===t});return Promise.resolve(n)}return Promise.resolve(e)}).then(function(e){return e.map(function(e){return e.id})}).then(function(e){return Promise.all(e.map(ke))}).catch(function(e){return console.log(e),ae}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ke(e){return xe.apply(this,arguments)}function xe(){return(xe=Object(u.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=$,e.abrupt("return",Q.a.get(a+t).then(function(e){return e.data}).then(function(e){return e.sort(function(e,t){return new Date(t.sampleDate)-new Date(e.sampleDate)})}).then(function(e){return e[0]}).then(function(e){var t=new he;t.name=e.site.name+" - "+e.site.landmark,t.lat=e.site.LatDD,t.long=e.site.LongDD;var a=new pe;return a.name="FIBI",a.unit="rating",a.value=e.FIBI,a.type=e.FIBIType,a.class=e.FIBIClass,a.date=e.sampleDate,t.datas.push(a),t}).catch(function(e){console.log(e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Oe(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(u.a)(c.a.mark(function e(t,a){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee+"startDateLo=".concat(De(),"&huc=").concat(t,"&mimeType=xml&characteristicName=").concat(a),e.abrupt("return",Q.a.get(n).then(function(e){return e}).catch(function(e){return ae}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function je(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(u.a)(c.a.mark(function e(t,a){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=te+"startDateLo=".concat(De(),"&huc=").concat(t,"&mimeType=xml&characteristicName=").concat(a),e.abrupt("return",Q.a.get(n).then().catch(function(e){console.log(e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function De(){var e=new Date;return e.setMonth(e.getMonth()-2),e.toLocaleDateString().replace(/\//g,"-")}function Se(){return(Se=Object(u.a)(c.a.mark(function e(t,a){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Me={getEcoliData:function(e){return de.apply(this,arguments)},getNitrateData:function(e){return fe.apply(this,arguments)},getFibiData:function(e){return we.apply(this,arguments)},getEpaStations:Oe,getSampleResults:je,getHuc:function(e,t){return Se.apply(this,arguments)},convertEsriGeometryPolygonToLatLngList:function(e){return ye.apply(this,arguments)}},Ce=(a(321),a(322),a(118)),Ne=a.n(Ce),Le=(a(307),a(314),Object(F.createMuiTheme)({palette:{primary:Ne.a,secondary:{main:"#84ffff"}},typography:{useNextVariants:!0}})),Te=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).handleSubmit=function(){var t=Object(u.a)(c.a.mark(function t(a){var n,r,s,i,o,u,l,p,h,d,f,m,g;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,le(a);case 2:return n=t.sent,t.next=5,Y(n,"huc_12");case 5:return r=t.sent,t.next=8,Me.convertEsriGeometryPolygonToLatLngList(r);case 8:for(s=t.sent.data,i=[],o=!0,u=!1,l=void 0,t.prev=13,p=s[Symbol.iterator]();!(o=(h=p.next()).done);o=!0)d=h.value,(f={}).lat=Number(d.y),f.lng=Number(d.x),i.push(f);t.next=21;break;case 17:t.prev=17,t.t0=t.catch(13),u=!0,l=t.t0;case 21:t.prev=21,t.prev=22,o||null==p.return||p.return();case 24:if(t.prev=24,!u){t.next=27;break}throw l;case 27:return t.finish(24);case 28:return t.finish(21);case 29:return e.setState({coordinatesList:i,showModal:!1}),t.next=32,Me.getNitrateData(n);case 32:return m=t.sent,t.next=35,Me.getEcoliData(n);case 35:return g=t.sent,t.t1=e,t.t2=g,t.t3=m,t.next=41,Me.getFibiData(n);case 41:t.t4=t.sent,t.t5={ecoliData:t.t2,nitrateData:t.t3,fibiData:t.t4},t.t1.setState.call(t.t1,t.t5),e.setState({dataPointsToPlot:m});case 45:case"end":return t.stop()}},t,null,[[13,17,21,29],[22,,24,28]])}));return function(e){return t.apply(this,arguments)}}(),e.state={coordinatesList:[],dataPointsToPlot:[],ecoliData:[],nitrateData:[],fibiData:[],selectedLayer:I,activity:"drink",showModal:!0},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"defaultDataPointsToPlot",value:function(e){}},{key:"renderModal",value:function(){var e=this;return this.state.showModal?r.a.createElement(T,{handleClose:function(){},show:!0,setCoordinatesList:function(t){e.setCoordinatesList(t)},handleSubmit:this.handleSubmit,setAddress:this.setAddress}):null}},{key:"render",value:function(){return r.a.createElement(F.MuiThemeProvider,{theme:Le},r.a.createElement("div",{className:"App"},r.a.createElement(b,{title:"Find Water Quality Data Near Me"}),r.a.createElement(g,{google:this.props.google,coordinatesList:this.state.coordinatesList,dataPointsToPlot:this.state.dataPointsToPlot}),r.a.createElement(q,{handleClose:function(){},show:!0,value:this.state.activity}),this.renderModal()))}}]),t}(n.Component),Ie=Object(m.GoogleApiWrapper)({apiKey:"AIzaSyBbQM-FxetsrzMqbJ2xzZbcbDUb9Au4nh4"})(Te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(318);i.a.render(r.a.createElement(Ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[120,1,2]]]);
//# sourceMappingURL=main.71d49ae0.chunk.js.map